define("yc_common:widget/web/banner/banner",function(require,exports,module){var bdTemplate=require("yc_common:static/util/bdTemplate"),PIAO_BANNER_TMPL=[function(_template_object){var _template_fun_array=[],fn=function(__data__){var _template_varName="";for(var name in __data__)_template_varName+="var "+name+'=__data__["'+name+'"];';eval(_template_varName),_template_fun_array.push("");var data=data.adBar,letterArray=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W"];_template_fun_array.push('<div id="scroller" class="flexslider">    <ul class="slides">        ');for(var i=0;i<data.list.length;i++){var item=data.list[i]||{},letter=letterArray[i];_template_fun_array.push("        "),item.pic&&item.plainUrl&&_template_fun_array.push('        <li data-log="{&#39;da_src&#39;:&#39;bnpiaoIndexPg.bannerBk.bannerLnk_',"undefined"==typeof letter?"":baidu.template._encodeHTML(letter),'&#39;}" data-na="',"undefined"==typeof item.bannerUrl?"":baidu.template._encodeHTML(item.bannerUrl),'" data-webapp="',"undefined"==typeof item.webappBannerUrl?"":baidu.template._encodeHTML(item.webappBannerUrl),'">        <a>            <img src="',"undefined"==typeof(item.pic||"")?"":baidu.template._encodeHTML(item.pic||""),'">        </a>        </li>        '),_template_fun_array.push("        ")}_template_fun_array.push("    </ul></div>"),_template_varName=null}(_template_object);return fn=null,_template_fun_array.join("")}][0],listurl="/yanchu/info/adspaceinfo";module.exports={init:function(e){var a=this;e=e||{};var t=e.cityId,n=e.channel;a.$el=$("#piao-widget-index-banner"),a.$el.addClass("piao-widget-index-banner"),PJS.location.getLocation({success:function(e){e=e||{};var i=t||!e.nuomiCityCode||-1==e.cityId?60028e4:e.nuomiCityCode;a.getList(i),a.channel=n,setTimeout(function(){a.initEvent()},0)},fail:function(){}})},checkAgent:function(){var e=this,a=window.navigator.userAgent.toLowerCase();"bdnuomi"==a.match(/bdnuomi/i)&&(e.isnuomi=!0)},initEvent:function(){var e,a=this;a.checkAgent(),a.$el.on("click","li",function(){return $(this).data("webapp")&&$(this).data("na")?(e=a.isnuomi?$(this).data("na"):$(this).data("webapp")+($(this).data("webapp").indexOf("?")>0?"&":"?")+"sfrom=wise",void PJS.page.start(e)):!1})},getList:function(e){var a=this,t={adSpaceId:"42",cityId:e};PJS.http.piaoajax({url:listurl,data:t,type:"GET",dataType:"json",success:function(e){e&&0==e.errorNo&&e.data&&("draw"==a.channel&&$(e.data.adBar.list).each(function(a,t){"-1"!=t.webappBannerUrl.indexOf(window.location.pathname)&&e.data.adBar.list.splice(a,1)}),a.renderBanner(e.data||[]))},error:function(){}})},renderBanner:function(e){var a=this;a.$el.html(PIAO_BANNER_TMPL({data:e})),a.FLEXSLIDER=$(".flexslider"),a._scroller()},_scroller:function(){var e=this;e.FLEXSLIDER.flexslider({slideshowSpeed:3e3,animationSpeed:500,touch:!0,animation:"slide",directionNav:!1,allowOneSlide:!1,pauseOnAction:!0,pauseInvisible:!0,after:function(e){e.pause(),e.play()}})}}});